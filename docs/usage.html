<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Wiki - Usage</title>
    <meta name="icon" content="../res/img/icon.webp"/>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
    <link rel="stylesheet" href="../res/css/scroll.css"/>
    <link rel="stylesheet" href="../res/css/docs.css"/>
    <link rel="stylesheet" href="../res/css/viewport.css"/>
    <link rel="icon" href="../res/img/icon.webp"/>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add a click event listener to all code elements on the page
            const codeElements = document.querySelectorAll('code');
            
            codeElements.forEach(codeElement => {
                codeElement.addEventListener('click', () => {
                    // Create a temporary textarea element to hold the code text
                    const textarea = document.createElement('textarea');
                    textarea.value = codeElement.textContent;
                    document.body.appendChild(textarea);

                    // Select and copy the text from the textarea
                    textarea.select();
                    document.execCommand('copy');

                    // Remove the temporary textarea
                    document.body.removeChild(textarea);
                });
            });
        });
    </script>
</head>
<body>
<header>
    <img src="../res/img/icon.png" height="25" width="25" alt=":gitio-logo:" />
    <h3>GitIO</h3>
    <div>
    
<a href="usage.html">Usage</a><a href="install.html">Install</a><a href="ideology.html">Ideology</a><a href="home.html">Home</a><a href="getting-started.html">Getting started</a>
    </div>
    <a href="https://codeberg.org/GamePlayer-8/gitio"><img src="../res/img/codeberg.svg" alt=":codeberg:" height="25" /></a>
    <a href="https://github.com/GamePlayer-8/gitio"><img src="../res/img/github.svg" alt=":github:" height="25" /></a>
    <a href=".."><img src="../res/img/icon.png" alt=":gitio:" height="25" /></a>
</header>

<div id="x">

<div id="sidebar">
    <h2>Contents</h2>
    <ul>
        <contents>
    <li><a href="#Usage">Usage</a></li>
      <li><a href="#GitHub">GitHub</a></li>
        <li><a href="#Advanced options">Advanced options</a></li>
      <li><a href="#Codeberg">Codeberg</a></li>
    <li><a href="#.woodpecker.yml">.woodpecker.yml</a></li>
    </ul>
</div>
<div id="content">

<h2 id="Usage">Usage</h2>

GitIO supports both Woodpecker CI (Drone CI) & GitHub Actions.


<h3 id="GitHub">GitHub</h3>

<details>

<summary>View usage for GitHub</summary>
The usage is as follows:

<pre><code lang="yaml">name: Your great workflow

on:
  push:
    branches:
      - master

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: gameplayer-8/gitio@v7
</code></pre>

<h4 id="Advanced options">Advanced options</h4>

Checkout with <code>git clone</code> advanced functionality:

<pre><code lang="yaml">- name: Checkout
  uses: gameplayer-8/gitio@v7
  with:
    type: 'checkout'
    cmd: '--recursive -b gh-pages'
    wizard: 'true'
</code></pre>
Full functionality of <code>git clone</code> is available under command <code>git clone --help</code> on your computer.

<br/>
Environment variables:

<ul>
<li><code>GITHUB_NAME</code></li>
<li><code>GITHUB_TOKEN</code></li>
<li><code>GITHUB_OWNER</code></li>
<li><code>GITHUB_REPO</code></li>
</ul>

Implement those variables by diabling Setup Wizard & setting them up manually in the environment.


<hr/>

Branch upload:

<pre><code lang="yaml">- name: Upload branch to gh-pages
  uses: gameplayer-8/gitio@v7
  with:
    type: 'branch'
    cmd: 'GIT_WORKDIR:/home/github/pages GIT_EMAIL:user@gmail.com'
</code></pre>
Full list of environment variables for <code>cmd</code>:

<ul>
<li><code>GIT_BRANCH</code></li>
<li><code>GIT_USERNAME</code></li>
<li><code>GIT_TOKEN</code></li>
<li><code>GIT_EMAIL</code></li>
<li><code>GIT_HOST</code></li>
<li><code>GIT_WORKDIR</code></li>
<li><code>GIT_PROJECT_NAME</code></li>
<li><code>GIT_REPO</code></li>
</ul>


<hr/>

Container publishment:

<pre><code lang="yaml">- name: Upload branch to gh-pages
  uses: gameplayer-8/gitio@v7
  with:
    type: 'container'
    cmd: 'OUTPUT_IMAGE_NAME:alpine:latest GIT_WORKDIR:.'
</code></pre>
Full list of environment variables for <code>cmd</code>:

<ul>
<li><code>OUTPUT_IMAGE_NAME</code></li>
<li><code>GIT_WORKDIR</code></li>
<li><code>GIT_HOST</code></li>
<li><code>GIT_USERNAME</code></li>
<li><code>GIT_TOKEN</code></li>
</ul>


<hr/>

</details>


<h3 id="Codeberg">Codeberg</h3>


<details>

<summary>View usage for Codeberg</summary>

Since Woodpecker CI lacks in action functionality,
you would need to execute <code>curl https://gitio.chimmie.k.vu/get.sh | sh</code>.

<br/>

Usage in the workflow:

<pre><code lang="yaml"># .woodpecker.yml
when:
  branch: [main]

steps:
  main:
    image: codeberg.org/gameplayer-8/gitio
    commands:
      - curl https://gitio.chimmie.k.vu/get.sh | sh
      - gitio branch GIT_BRANCH:pages
      - gitio container OUTPUT_IMAGE_NAME:$CI_REPO_NAME:$(basename "$CI_COMMIT_REF")
    secrets:
      - SYSTEM_TOKEN
      - SYSTEM_TOKEN_PASSWD
      - OCI_TOKEN
</code></pre>
<ul>
<li><code>SYSTEM_TOKEN</code> is an SSH private key for accessing I/O of the Codeberg repo.</li>
<li><code>SYSTEM_TOKEN_PASSWD</code> is a standard token for git I/O (recommended).</li>
<li><code>OCI_TOKEN</code> is for container publishment.</li>
</ul>


<br/>

Usage is pretty similar to the GitHub version (environment variable stays the same).


<br/>

Woodpecker has a lot of <code>CI_*</code> variables, what you can override more easily than on GitHub.


</div>
</div>
</body>
</html>
